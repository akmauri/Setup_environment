// Prisma Schema for Multi-Tenant Architecture
// This schema defines the public schema tables (system-wide)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  schemas  = ["public"]
}

// Public Schema - System-wide tables

model Tenant {
  id        String   @id @default(uuid()) @db.Uuid
  name      String   @db.VarChar(255)
  subdomain String?  @unique @db.VarChar(100)
  tier      String   @default("free") @db.VarChar(50)
  status    String   @default("active") @db.VarChar(50)
  settings  Json     @default("{}")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("tenants")
  @@schema("public")
}

model Migration {
  id        String   @id @default(uuid()) @db.Uuid
  name      String   @unique @db.VarChar(255)
  version   String   @db.VarChar(50)
  appliedAt DateTime @default(now()) @map("applied_at")

  @@map("migrations")
  @@schema("public")
}
